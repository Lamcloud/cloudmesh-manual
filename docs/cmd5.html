

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1. Cmd5 &mdash; Cloudmesh v4 alpha documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="1. Group command" href="group.html" />
    <link rel="prev" title="5. Cloudmesh Yaml file Encrytion" href="configuration/encryption.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Cloudmesh v4
          

          
          </a>

          
            
            
              <div class="version">
                4.0.28
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">PREFACE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="preface/about.html">1. About</a></li>
<li class="toctree-l1"><a class="reference internal" href="preface/contributors.html">2. Contributors</a></li>
</ul>
<p class="caption"><span class="caption-text">INSTALLATION</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation/install.html">1. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation/quickstart.html">2. Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration/configuration.html">3. Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation/mongo.html">4. Cloudmesh Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration/encryption.html">5. Cloudmesh Yaml file Encrytion</a></li>
</ul>
<p class="caption"><span class="caption-text">SOMMAND SHELL</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">1. Cmd5</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#features">1.1. Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#execution-shell-commaand">1.1.1. Execution shell commaand</a></li>
<li class="toctree-l3"><a class="reference internal" href="#timers">1.1.2. Timers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#variables">1.1.3. Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#defaults">1.1.4. Defaults</a></li>
<li class="toctree-l3"><a class="reference internal" href="#stopwatch">1.1.5. Stopwatch</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#plugins">1.2. Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="#docker">1.3. Docker</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">CLOUD SERVICES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="group.html">1. Group command</a></li>
<li class="toctree-l1"><a class="reference internal" href="vm/vm.html">2. Virtual Machine Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="vm/image.html">3. Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="vm/flavor.html">4. Flavors</a></li>
<li class="toctree-l1"><a class="reference internal" href="storage/storage.html">5. Cloudmesh Multi Cloud Storage Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">6. Infrastructure Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="jupyter.html">7. Jupyter Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="hpc/batch.html">8. Batch</a></li>
</ul>
<p class="caption"><span class="caption-text">openapi</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="openapi/README-storage-openapi.html">1. Cloudmesh Multi Cloud Open API Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="openapi/ufo.html">2. REST Service (outdated)</a></li>
</ul>
<p class="caption"><span class="caption-text">MANUAL PAGES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="reference-card.html">1. Reference Card (proposed)</a></li>
<li class="toctree-l1"><a class="reference internal" href="manual/commands.html">2. Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="manual-cmd5.html">3. Manual Cmd5</a></li>
<li class="toctree-l1"><a class="reference internal" href="manual-group.html">4. Manual Group</a></li>
<li class="toctree-l1"><a class="reference internal" href="manual-compute.html">5. Compute Manual Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="manual-storage.html">6. Storage Manual Pages</a></li>
</ul>
<p class="caption"><span class="caption-text">DATABASE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="storage/database.html">1. Cloudmesh Database</a></li>
</ul>
<p class="caption"><span class="caption-text">BENCHMARKS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="benchmarks/README.html">1. Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="benchmarks/awsec2-vm-management-benchmark.html">2. AWS EC2 VM Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="benchmarks/awsec2_benchmark_ubuntu.html">3. AWS EC2 VM Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="benchmarks/awss3-storage-benchmark.html">4. AWS S3 File Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="benchmarks/azure-storage-benchmark.html">5. Azure Blob Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="benchmarks/box.html">6. Benchmark results for box Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="benchmarks/emr.html">7. AWS EMR Benchmarking</a></li>
<li class="toctree-l1"><a class="reference internal" href="benchmarks/test_compute_database.html">8. AWS EC2 Compute Database</a></li>
</ul>
<p class="caption"><span class="caption-text">CODE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="code/code.html">1. Code Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="code/common.html">2. Common</a></li>
<li class="toctree-l1"><a class="reference internal" href="code/cmd5.html">3. CMD5</a></li>
<li class="toctree-l1"><a class="reference internal" href="code/cloudmesh.html">4. Cloudmesh</a></li>
<li class="toctree-l1"><a class="reference internal" href="code/management.html">5. Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="code/mongo.html">6. Mongo</a></li>
<li class="toctree-l1"><a class="reference internal" href="code/commands.html">7. Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="code/inventory.html">8. Inventory</a></li>
<li class="toctree-l1"><a class="reference internal" href="code/storage.html">9. cloudmesh-storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="code/cloud.html">10. cloudmesh-cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="code/batch.html">11. cloudmesh-batch</a></li>
<li class="toctree-l1"><a class="reference internal" href="code/emr.html">12. cloudmesh-emr</a></li>
</ul>
<p class="caption"><span class="caption-text">CONTRIBUTION</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="dev/conventions.html">1. Code Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev/management.html">2. Code Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev/management.html#documentation-management">3. Documentation Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev/management.html#version-management">4. Version Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev/pytest.html">5. Pytest</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev/todo.html">6. ToDo</a></li>
</ul>
<p class="caption"><span class="caption-text">CLOUD ACCOUNTS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="accounts/aws.html">1. AWS Account Creation</a></li>
<li class="toctree-l1"><a class="reference internal" href="accounts/azure.html">2. Azure Account Creation</a></li>
<li class="toctree-l1"><a class="reference internal" href="accounts/google.html">3. Google Storage Providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="accounts/box.html">4. Box Account</a></li>
<li class="toctree-l1"><a class="reference internal" href="accounts/accountcreation-old.html">5. VM Providers (outdated)</a></li>
</ul>
<p class="caption"><span class="caption-text">Outdated:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="CM4README.html">1. CM4 Details (outdated)</a></li>
<li class="toctree-l1"><a class="reference internal" href="vcluster.html">2. Virtual Cluster (in progress)</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Cloudmesh v4</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>1. Cmd5</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/cmd5.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="cmd5">
<h1>1. Cmd5<a class="headerlink" href="#cmd5" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://zenodo.org/badge/latestdoi/82920490"><img alt="DOI" src="https://zenodo.org/badge/82920490.svg" /></a> <a class="reference external" href="https://pypi.python.org/pypi/cloudmesh-cmd5"><img alt="Version" src="https://img.shields.io/pypi/v/cloudmesh-cmd5.svg" /></a> <a class="reference external" href="https://github.com/cloudmesh/cloudmesh-cmd5/blob/master/LICENSE"><img alt="License" src="https://img.shields.io/badge/License-Apache%202.0-blue.svg" /></a> <a class="reference external" href="https://pypi.python.org/pypi/cloudmesh-cmd5"><img alt="Python" src="https://img.shields.io/pypi/pyversions/cloudmesh-cmd5.svg" /></a> <a class="reference external" href="https://pypi.python.org/pypi/cloudmesh-cmd5"><img alt="Format" src="https://img.shields.io/pypi/status/cloudmesh-cmd5.svg" /></a> <a class="reference external" href="https://pypi.python.org/pypi/cloudmesh-cmd5"><img alt="Format" src="https://img.shields.io/pypi/status/cloudmesh-cmd5.svg" /></a> <a class="reference external" href="https://travis-ci.com/cloudmesh/cloudmesh-cmd5"><img alt="Travis" src="https://travis-ci.com/cloudmesh/cloudmesh-cmd5.svg?branch=master" /></a></p>
<p>To run the shell you can activate it with the cms command. cms stands
for cloudmesh shell:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cms
</pre></div>
</div>
<p>It will print the banner and enter the shell:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>+-------------------------------------------------------+
|   ____ _                 _                     _      |
|  / ___| | ___  _   _  __| |_ __ ___   ___  ___| |__   |
| | |   | |/ _ \| | | |/ _` | &#39;_ ` _ \ / _ \/ __| &#39;_ \  |
| | |___| | (_) | |_| | (_| | | | | | |  __/\__ \ | | | |
|  \____|_|\___/ \__,_|\__,_|_| |_| |_|\___||___/_| |_| |
+-------------------------------------------------------+
|                  Cloudmesh CMD5 Shell                 |
+-------------------------------------------------------+

cms&gt;
</pre></div>
</div>
<p>To see the list of commands you can say:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cms</span><span class="o">&gt;</span> <span class="n">help</span>
</pre></div>
</div>
<p>To see the manual page for a specific command, please use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">help</span> <span class="n">COMMANDNAME</span>
</pre></div>
</div>
<div class="section" id="features">
<h2>1.1. Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<p>The following highlighted features are available:</p>
<ul class="simple">
<li><p>easy command integration through seterate modules</p></li>
<li><p>multi cloud envirdonments (under development) though cloudmesh-cloud
plugin</p></li>
<li><p>openapi integration through cloudmesh-openapi plugin</p></li>
<li><p>general commands as documented at in the
<a class="reference external" href="https://cloudmesh.github.io/cloudmesh-manual/">manual</a> such as
<a class="reference external" href="manual/cmd5/manual/cmd5/admin.html">admin</a>,
<a class="reference external" href="manual/cmd5/manual/cmd5/banner.html">banner</a>,
<a class="reference external" href="manual/cmd5/manual/cmd5/clear.html">clear</a>,
<a class="reference external" href="manual/cmd5/echo.html">echo</a>,
<a class="reference external" href="manual/cmd5/default.html">default</a>,
<a class="reference external" href="manual/cmd5/info.html">info</a>, <a class="reference external" href="manual/cmd5/pause.html">pause</a>,
<a class="reference external" href="manual/cmd5/plugin.html">plugin</a>,
<a class="reference external" href="manual/cmd5/quit.html">quit</a>, <a class="reference external" href="manual/cmd5/shell.html">shell</a>,
<a class="reference external" href="manual/cmd5/sleep.html">sleep</a>,
<a class="reference external" href="manual/cmd5/stopwatch.html">stopwatch</a>,
<a class="reference external" href="manual/cmd5/sys.html">sys</a>, <a class="reference external" href="manual/cmd5/var.html">var</a>,
<a class="reference external" href="manual/cmd5/version.html">version</a>,
<a class="reference external" href="manual/cmd5/open.html">open</a>, and others</p></li>
</ul>
<div class="section" id="execution-shell-commaand">
<h3>1.1.1. Execution shell commaand<a class="headerlink" href="#execution-shell-commaand" title="Permalink to this headline">¶</a></h3>
<p>You can execute shell commands when the beginning charater is !</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cms !pwd
cms shell pwd
</pre></div>
</div>
</div>
<div class="section" id="timers">
<h3>1.1.2. Timers<a class="headerlink" href="#timers" title="Permalink to this headline">¶</a></h3>
<p>To switch timers on or off you can use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cms</span> <span class="nb">set</span> <span class="n">timer</span><span class="o">=</span><span class="n">on</span>
</pre></div>
</div>
<p>Than every command you type is timed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cms banner hallo
banner
######################################################################
# hallo
######################################################################
Timer: 0.0011s (banner hallo)
</pre></div>
</div>
</div>
<div class="section" id="variables">
<h3>1.1.3. Variables<a class="headerlink" href="#variables" title="Permalink to this headline">¶</a></h3>
<p>you can store variables with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cms</span> <span class="n">var</span> <span class="n">a</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cms</span> <span class="nb">set</span> <span class="n">a</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
<p>you can access them on the commandline with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>var.a
$a
</pre></div>
</div>
<p>Thus if you type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cms</span> <span class="n">banner</span> <span class="n">var</span><span class="o">.</span><span class="n">a</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cms banner $a
</pre></div>
</div>
<p>it will print the variable value in a banner</p>
<p>You can list all variables with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="nb">list</span>
</pre></div>
</div>
<p>OS Variables can also be integrated. <code class="docutils literal notranslate"><span class="pre">os.HOME</span></code> will be replaced with
the HOME variable from the shell, try it with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cms</span> <span class="n">banner</span> <span class="n">os</span><span class="o">.</span><span class="n">HOME</span>
</pre></div>
</div>
</div>
<div class="section" id="defaults">
<h3>1.1.4. Defaults<a class="headerlink" href="#defaults" title="Permalink to this headline">¶</a></h3>
<p>Defaults are variables with a context in which the default applies. For
example we can set default images for a cloud. General defaults are
placed in the context <code class="docutils literal notranslate"><span class="pre">general</span></code>. To set the default cloud you can
use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cms</span> <span class="n">default</span> <span class="n">cloud</span><span class="o">=</span><span class="n">kilo</span>
</pre></div>
</div>
<p>To List the defaults use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cms</span> <span class="n">default</span> <span class="nb">list</span>
</pre></div>
</div>
<div class="admonition-todo admonition" id="index-0">
<p class="admonition-title">Todo</p>
<p>cmd5 default - add the ability to define the defaukts also with a . notation.</p>
<p>cms default chameleon.image=”ubuntu”</p>
<p>here the key is image, the context is aws and the value is unbuntu19.04</p>
</div>
<p>To use the defaults in a command preceed it with the the keyword
<code class="docutils literal notranslate"><span class="pre">default.</span></code> and append the context and the name of the default
variable. If the context is missing, the <code class="docutils literal notranslate"><span class="pre">general</span></code> context will be
used. Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">banner</span> <span class="n">default</span><span class="o">.</span><span class="n">cloud</span>
<span class="n">default</span> <span class="n">image</span><span class="o">=</span><span class="n">ubnuntu</span> <span class="o">--</span><span class="n">context</span><span class="o">=</span><span class="n">chameleon</span>
<span class="n">banner</span> <span class="n">default</span><span class="o">.</span><span class="n">chameleon</span><span class="o">.</span><span class="n">image</span>
</pre></div>
</div>
</div>
<div class="section" id="stopwatch">
<h3>1.1.5. Stopwatch<a class="headerlink" href="#stopwatch" title="Permalink to this headline">¶</a></h3>
<p>For some benchmarks this could be helpful. Naturally in an interactive shell you will not be able to measure reliably
as you also measure the response time of the user, but in case you use cloudmesh scripts this coudl be a reat good way
for you to customize your benchmarks. We even provide convenient integration for pytests and you can see in our special
pytest section how to use the stopwatch from within pytets.</p>
<p>Here is an example for a stcipt:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">stopwatch</span> <span class="n">start</span> <span class="n">g</span>
<span class="n">stopwatch</span> <span class="n">stop</span> <span class="n">g</span>
<span class="n">stopwatch</span> <span class="nb">print</span> <span class="n">g</span>
</pre></div>
</div>
<p>Then execute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="n">s</span><span class="o">.</span><span class="n">cm</span> <span class="o">|</span> <span class="n">cms</span>
</pre></div>
</div>
<p>You will get something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cat s.cm | cms

+-------------------------------------------------------+
|   ____ _                 _                     _      |
|  / ___| | ___  _   _  __| |_ __ ___   ___  ___| |__   |
| | |   | |/ _ \| | | |/ _` | &#39;_ ` _ \ / _ \/ __| &#39;_ \  |
| | |___| | (_) | |_| | (_| | | | | | |  __/\__ \ | | | |
|  \____|_|\___/ \__,_|\__,_|_| |_| |_|\___||___/_| |_| |
+-------------------------------------------------------+
|                  Cloudmesh CMD5 Shell                 |
+-------------------------------------------------------+
cms&gt; Timer g started ...
cms&gt; Timer g started ...
cms&gt; Timer g: 0.000274181365967 s
</pre></div>
</div>
<p>Cmd5 has even a convenient benchmark print command that not only prints all timers, but includes some
information about your machine on which you run the benchmarks. You can get this information with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cms</span> <span class="n">stopwatch</span> <span class="n">benchmark</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="plugins">
<h2>1.2. Plugins<a class="headerlink" href="#plugins" title="Permalink to this headline">¶</a></h2>
<p>Cmd5 comes with a sophisticated plugin mechanism. Commands can be
readily designed with the help of  sys command.</p>
<p>The sys command can be installed either from source (as discussed
previously) or via pip</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pip install cloudmesh-sys
</pre></div>
</div>
<p>Once you have installed it, execute <code class="docutils literal notranslate"><span class="pre">cms</span> <span class="pre">help</span> <span class="pre">sys</span></code> to see the usage.
Now you simply can in a new directory execute the sys command as
follows, where <code class="docutils literal notranslate"><span class="pre">mycommnad</span></code> is than name of the command you like to
implement.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mkdir mycommand
$ <span class="nb">cd</span> mycommand
$ cms sys <span class="nb">command</span> generate mycommand
</pre></div>
</div>
<p>A directory with the name <code class="docutils literal notranslate"><span class="pre">cloudmesh-mycommand</span></code> will be generated that
contains the template for the command. You can enter this template and
modify the implementation in the folders <code class="docutils literal notranslate"><span class="pre">cloudmesh/mycommand/api</span></code> and
<code class="docutils literal notranslate"><span class="pre">cloudmesh/mycommand/command</span></code> when installing it with</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install .
</pre></div>
</div>
<p>The command will be added to the cms command&gt;</p>
<p>An example for the bar command is presented at:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/cloudmesh/cloudmesh.bar/blob/master/cloudmesh/bar/command/bar.py">cloudmesh/bar/command/bar.py</a></p></li>
</ul>
<p>It shows how simple the command definition is (bar.py):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">code</span><span class="p">::</span> <span class="n">bash</span>
</pre></div>
</div>
<blockquote>
<div><p>from __future__ import print_function
from cloudmesh.shell.command import command
from cloudmesh.shell.command import PluginCommand</p>
<p>class BarCommand(PluginCommand):</p>
<blockquote>
<div><p>&#64;command
def do_bar(self, args, arguments):</p>
<blockquote>
<div><p>“”“</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Usage</span><span class="p">:</span>
      <span class="n">command</span> <span class="o">-</span><span class="n">f</span> <span class="n">FILE</span>
      <span class="n">command</span> <span class="n">FILE</span>
      <span class="n">command</span> <span class="nb">list</span>
<span class="n">This</span> <span class="n">command</span> <span class="n">does</span> <span class="n">some</span> <span class="n">useful</span> <span class="n">things</span><span class="o">.</span>
<span class="n">Arguments</span><span class="p">:</span>
    <span class="n">FILE</span>   <span class="n">a</span> <span class="n">file</span> <span class="n">name</span>
<span class="n">Options</span><span class="p">:</span>
    <span class="o">-</span><span class="n">f</span>      <span class="n">specify</span> <span class="n">the</span> <span class="n">file</span>
</pre></div>
</div>
<p>“””
print(arguments)</p>
</div></blockquote>
</div></blockquote>
</div></blockquote>
<p>An important difference to other CMD solutions is that our commands can
leverage (besides the standrad definition), docopts as a way to define
the manual page. This allows us to use arguments as dict and use simple
if conditions to interpret the command. Using docopts has the advantage
that contributors are forced to think about the command and its options
and document them from the start. Previously we used not to use docopts
and argparse was used. However we noticed that for some contributions
the lead to commands that were either not properly documented or the
developers delivered ambiguous commands that resulted in confusion and
wrong ussage by the users. Hence, we do recommend that you use docopts.</p>
<p>The transformation is enabled by the <code class="docutils literal notranslate"><span class="pre">&#64;command</span></code> decorator that takes
also the manual page and creates a proper help message for the shell
automatically. Thus there is no need to introduce a sepaarte help method
as would normally be needed in CMD.</p>
</div>
<div class="section" id="docker">
<h2>1.3. Docker<a class="headerlink" href="#docker" title="Permalink to this headline">¶</a></h2>
<p>Developers can easily create a docker container.</p>
<p>Cloudmesh can be run easily in a container with the help of docker. A
Dockefile is provided as an example that you may adapt for your needs</p>
<p>To use the docker file we have included a numbe or convenient targets
also in our makefile.</p>
<p>You can create the image with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">image</span>
</pre></div>
</div>
<p>You can run teh image and enter a shell with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">shell</span>
</pre></div>
</div>
<p>This allows you to try things out in the image from bash which is good
for development and debugging. You can directly enter the cloudmesh
shell <code class="docutils literal notranslate"><span class="pre">cms</span></code> with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">cms</span>
</pre></div>
</div>
<p>or say:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">it</span> <span class="n">cloudmesh</span><span class="o">/</span><span class="n">cmd5</span><span class="p">:</span><span class="mf">1.0</span>
</pre></div>
</div>
<p>It will create a default .cloudmesh/yaml file whihc your would have to
modify. The reason we have not mounted the yaml file in the make files
form your directory is that we need a clean image to test the initial
setup.</p>
<p>If you have an example on how to mount teh yaml file please let us know
and we add it here.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="group.html" class="btn btn-neutral float-right" title="1. Group command" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="configuration/encryption.html" class="btn btn-neutral float-left" title="5. Cloudmesh Yaml file Encrytion" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018-2019, Cloudmesh Community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>